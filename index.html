<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Timetable University – Responsive Scheduler</title>
  
  <!-- SEO & Author -->
  <meta name="author" content="Bocaletto Luca">
  <meta name="description" content="Timetable University is a modern, responsive one-page webapp for students to schedule courses by drag-and-drop. Import/export JSON, add, edit, delete courses, detect conflicts, and print directly.">
  <meta name="keywords" content="timetable, university, schedule, drag and drop, responsive, JSON, print, courses">
  <link rel="canonical" href="https://github.com/bocaletto-luca/TimetableUniversity">

  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" rel="stylesheet">

  <style>
    /* Variables */
    :root {
      --clr-bg: #f4f6f8;
      --clr-white: #ffffff;
      --clr-dark: #2f3e46;
      --clr-light: #cad2c5;
      --clr-primary: #84a98c;
      --clr-secondary: #ddbea9;
      --clr-danger: #e07a5f;
      --clr-border: #d3d3d3;
      --transition: 0.3s ease-in-out;
      --font: 'Roboto', sans-serif;
      --sidebar-width: 260px;
    }

    /* Reset & Base */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: var(--font);
      background: var(--clr-bg);
      color: var(--clr-dark);
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }
    button, input, select {
      font: inherit;
      outline: none;
    }
    button { cursor: pointer; }

    /* Header */
    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: var(--clr-white);
      padding: 0.8rem 1.2rem;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      position: sticky; top: 0; z-index: 10;
    }
    header h1 {
      font-size: 1.4rem;
      font-weight: 500;
    }
    #toggle-sidebar {
      background: none;
      border: none;
      font-size: 1.4rem;
      color: var(--clr-dark);
      display: none;
    }

    /* Layout */
    #container {
      display: grid;
      grid-template-columns: var(--sidebar-width) 1fr;
      flex: 1;
      overflow: hidden;
      transition: grid-template-columns var(--transition);
    }
    #sidebar {
      background: var(--clr-white);
      border-right: 1px solid var(--clr-border);
      display: flex;
      flex-direction: column;
      padding: 1rem;
      overflow-y: auto;
    }
    #timetable-wrapper {
      overflow: auto;
      padding: 1rem;
    }

    /* Sidebar Controls */
    #controls {
      display: flex;
      gap: 0.5rem;
      margin-bottom: 1rem;
      flex-wrap: wrap;
    }
    #controls button {
      padding: 0.5rem 0.8rem;
      border: none;
      border-radius: 4px;
      background: var(--clr-primary);
      color: var(--clr-white);
      transition: background var(--transition);
    }
    #controls button:hover {
      background: var(--clr-dark);
    }
    #course-form {
      display: grid;
      grid-template-columns: 1fr auto;
      gap: 0.5rem;
      margin-bottom: 1rem;
    }
    #course-form input,
    #course-form select {
      padding: 0.5rem;
      border: 1px solid var(--clr-border);
      border-radius: 4px;
    }
    #course-form button {
      background: var(--clr-secondary);
    }
    #course-list {
      flex: 1;
      overflow-y: auto;
    }
    .course-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0.6rem;
      margin-bottom: 0.4rem;
      border-radius: 4px;
      background: var(--clr-light);
      color: var(--clr-dark);
      transition: transform var(--transition);
    }
    .course-item:hover {
      transform: scale(1.02);
    }
    .course-item span {
      flex: 1;
      margin-right: 0.5rem;
    }
    .course-item button {
      background: none;
      border: none;
      font-size: 1rem;
      color: var(--clr-dark);
      margin-left: 0.3rem;
    }

    /* Timetable Grid */
    #grid {
      display: grid;
      grid-template-columns: 60px repeat(5,1fr);
      grid-template-rows: 30px repeat(12,60px);
      gap: 1px;
      background: var(--clr-border);
    }
    .cell {
      background: var(--clr-white);
      position: relative;
      font-size: 0.85rem;
    }
    .cell.header {
      background: var(--clr-light);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 500;
    }
    .cell.time {
      background: var(--clr-light);
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .cell.slot {
      transition: background var(--transition);
    }
    .cell.slot.dragover {
      background: var(--clr-secondary);
    }
    .scheduled {
      position: absolute;
      top: 4px; left: 4px; right: 4px; bottom: 4px;
      padding: 4px;
      border-radius: 4px;
      color: var(--clr-white);
      font-weight: 500;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      cursor: pointer;
      transition: transform var(--transition), opacity var(--transition);
    }
    .scheduled:hover {
      transform: scale(1.03);
      opacity: 0.9;
    }

    /* Print Styles */
    @media print {
      header, #sidebar, #controls, #course-form, #course-list, #print-btn, #github-link, #toggle-sidebar {
        display: none !important;
      }
      #grid {
        width: 100%;
        transform: scale(0.8);
        transform-origin: top left;
      }
    }

    /* Responsive */
    @media (max-width: 900px) {
      #toggle-sidebar { display: block; }
      #container.collapsed {
        grid-template-columns: 0 1fr;
      }
      #container.collapsed #sidebar {
        overflow: hidden;
      }
    }
  </style>
</head>
<body>

  <header>
    <button id="toggle-sidebar">☰</button>
    <h1>Timetable University</h1>
  </header>

  <div id="container">
    <aside id="sidebar">
      <div id="controls">
        <button id="import-btn">Import JSON</button>
        <button id="export-btn">Export JSON</button>
        <input type="file" id="file-input" accept=".json" style="display:none">
      </div>

      <form id="course-form">
        <input type="text" id="course-name" placeholder="Course Name" required>
        <select id="course-faculty">
          <option value="Science">Science</option>
          <option value="Engineering">Engineering</option>
          <option value="Arts">Arts</option>
        </select>
        <button type="submit">Add</button>
      </form>

      <div id="course-list"></div>
    </aside>

    <div id="timetable-wrapper">
      <div id="grid"></div>
    </div>
  </div>

  <button id="print-btn" style="margin:1rem;align-self:flex-end;">Print Timetable</button>

  <div id="github-link">
    View on GitHub: 
    <a href="https://github.com/bocaletto-luca/TimetableUniversity" target="_blank">
      bocaletto-luca/TimetableUniversity
    </a>
  </div>

  <script>
    // Data Model
    let data = {
      courses: [
        { id: 'C1', name: 'Mathematics', faculty: 'Science' },
        { id: 'C2', name: 'Physics', faculty: 'Science' },
        { id: 'C3', name: 'Programming', faculty: 'Engineering' },
        { id: 'C4', name: 'History', faculty: 'Arts' },
        { id: 'C5', name: 'Literature', faculty: 'Arts' }
      ],
      schedule: []
    };

    const days = ['Mon','Tue','Wed','Thu','Fri'];
    const startHour = 8, slotsCount = 12;

    // Elements
    const containerEl = document.getElementById('container');
    const toggleBtn = document.getElementById('toggle-sidebar');
    const courseListEl = document.getElementById('course-list');
    const fileInput = document.getElementById('file-input');

    // Sidebar toggle
    toggleBtn.addEventListener('click', () => {
      containerEl.classList.toggle('collapsed');
    });

    // Render courses
    function renderCourses() {
      courseListEl.innerHTML = '';
      data.courses.forEach(c => {
        const div = document.createElement('div');
        div.className = 'course-item';
        div.style.backgroundColor = `var(--clr-${c.faculty.toLowerCase()})`;
        div.draggable = true;
        div.dataset.id = c.id;

        const span = document.createElement('span');
        span.textContent = c.name;
        div.appendChild(span);

        const edit = document.createElement('button');
        edit.textContent = '✎';
        edit.title = 'Edit';
        edit.addEventListener('click', () => editCourse(c.id));
        div.appendChild(edit);

        const del = document.createElement('button');
        del.textContent = '✕';
        del.title = 'Delete';
        del.addEventListener('click', () => deleteCourse(c.id));
        div.appendChild(del);

        div.addEventListener('dragstart', e => {
          e.dataTransfer.setData('text/plain', c.id);
        });

        courseListEl.appendChild(div);
      });
    }

    // Add Course
    document.getElementById('course-form').addEventListener('submit', e => {
      e.preventDefault();
      const name = e.target['course-name'].value.trim();
      const faculty = e.target['course-faculty'].value;
      if (!name) return;
      const id = 'C' + Date.now();
      data.courses.push({ id, name, faculty });
      e.target.reset();
      renderCourses();
    });

    // Edit Course
    function editCourse(id) {
      const course = data.courses.find(c => c.id === id);
      const newName = prompt('Course name:', course.name);
      if (newName) course.name = newName.trim();
      const newFac = prompt('Faculty (Science, Engineering, Arts):', course.faculty);
      if (newFac) course.faculty = newFac;
      updateScheduledSlots(id);
      renderCourses();
    }

    // Delete Course
    function deleteCourse(id) {
      if (!confirm('Delete this course and its scheduled slots?')) return;
      data.courses = data.courses.filter(c => c.id !== id);
      data.schedule = data.schedule.filter(s => {
        if (s.courseId === id) {
          const cell = getSlot(s.day, s.hour);
          cell.dataset.courseId = '';
          cell.innerHTML = '';
          return false;
        }
        return true;
      });
      renderCourses();
    }

    // Build Grid
    function buildGrid() {
      const grid = document.getElementById('grid');
      grid.innerHTML = '';
      grid.appendChild(cell('', ['header']));
      days.forEach(d => grid.appendChild(cell(d, ['header'])));
      for (let i = 0; i < slotsCount; i++) {
        grid.appendChild(cell((startHour + i) + ':00', ['time']));
        days.forEach(day => {
          const slot = cell('', ['slot']);
          slot.dataset.day = day;
          slot.dataset.hour = startHour + i;
          setupDragDrop(slot);
          grid.appendChild(slot);
        });
      }
    }

    // Create Cell
    function cell(text, classes=[]) {
      const c = document.createElement('div');
      c.classList.add('cell', ...classes);
      c.textContent = text;
      return c;
    }

    // Get slot element
    function getSlot(day, hour) {
      return document.querySelector(`.cell.slot[data-day="${day}"][data-hour="${hour}"]`);
    }

    // Drag & Drop
    function setupDragDrop(slot) {
      slot.addEventListener('dragover', e => {
        e.preventDefault();
        slot.classList.add('dragover');
      });
      slot.addEventListener('dragleave', () => {
        slot.classList.remove('dragover');
      });
      slot.addEventListener('drop', e => {
        e.preventDefault();
        slot.classList.remove('dragover');
        const courseId = e.dataTransfer.getData('text/plain');
        if (slot.dataset.courseId) return alert('Conflict: slot occupied');
        scheduleCourse(courseId, slot.dataset.day, +slot.dataset.hour);
      });
    }

    // Schedule Course
    function scheduleCourse(courseId, day, hour) {
      const course = data.courses.find(c => c.id === courseId);
      data.schedule.push({ courseId, day, hour });
      const slot = getSlot(day, hour);
      const div = document.createElement('div');
      div.className = 'scheduled';
      div.textContent = course.name;
      div.style.backgroundColor = `var(--clr-${course.faculty.toLowerCase()})`;
      div.addEventListener('dblclick', () => {
        data.schedule = data.schedule.filter(s =>
          !(s.courseId===courseId && s.day===day && s.hour===hour)
        );
        slot.dataset.courseId = '';
        slot.innerHTML = '';
      });
      slot.dataset.courseId = courseId;
      slot.appendChild(div);
    }

    // Update scheduled slot visuals
    function updateScheduledSlots(id) {
      data.schedule.forEach(s => {
        if (s.courseId === id) {
          const slot = getSlot(s.day, s.hour);
          const div = slot.querySelector('.scheduled');
          const course = data.courses.find(c => c.id === id);
          div.textContent = course.name;
          div.style.backgroundColor = `var(--clr-${course.faculty.toLowerCase()})`;
        }
      });
    }

    // Import JSON
    document.getElementById('import-btn').addEventListener('click', () => fileInput.click());
    fileInput.addEventListener('change', e => {
      const file = e.target.files[0];
      if (!file) return;
      const reader = new FileReader();
      reader.onload = () => {
        try {
          data = JSON.parse(reader.result);
          buildGrid();
          renderCourses();
          data.schedule.forEach(s => scheduleCourse(s.courseId, s.day, s.hour));
        } catch {
          alert('Invalid JSON file');
        }
      };
      reader.readAsText(file);
    });

    // Export JSON
    document.getElementById('export-btn').addEventListener('click', () => {
      const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = 'timetable.json';
      a.click(); URL.revokeObjectURL(url);
    });

    // Print
    document.getElementById('print-btn').addEventListener('click', () => window.print());

    // Init
    buildGrid();
    renderCourses();
  </script>
</body>
</html>
